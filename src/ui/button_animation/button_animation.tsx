// @ts-ignore
import React, { ReactNode } from 'react';
// @ts-ignore
import clsx from 'clsx';

import style from './button_animation.module.scss';

interface ButtonProps {
    onClick?: void;
    type?: 'default' | 'play' | 'author' | 'country';
    children?: React.ReactNode;
    arrow?: boolean;
    play?: boolean;
    author?: boolean;
    country?: boolean;
}

export const ButtonAnimation = ({ onClick, type='default', children, arrow, play, author, country }: ButtonProps) => {
    const renderArrow = () => (
        <svg className={style.svg} width="359" height="56" viewBox="0 0 359 56" xmlns="http://www.w3.org/2000/svg">
            <clipPath id='mask'>
                <rect x="0.5" y="0.5" width="294" height="55" rx="5.5"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M319.199 29.5323L319.199 26.7355L338.815 26.7355L329.681 17.6015L331.658 15.6238L342.206 26.1713L342.206 26.1711L342.77 26.7355H342.801V26.766L344.184 28.1488L342.801 29.5315L342.801 29.5323L342.8 29.5323L331.659 40.6738L329.681 38.6961L338.845 29.5323L319.199 29.5323Z" fill="white"/>
            </clipPath>
        </svg>
    )

    const renderPlay = () => (
        <svg className={style.svg} width="359" height="56" viewBox="0 0 359 56" xmlns="http://www.w3.org/2000/svg">
            <clipPath id='mask-play'>
                <rect x="0.5" y="0.5" width="294" height="55" rx="5.5" stroke="white"/>
                <path d="M324.333 18.6667V37.3334L339 28.0001L324.333 18.6667Z" fill="white"/>
            </clipPath>
            <defs>
                <mask id="mask-text" x="0" y="0" width="100%" height="100%" >
                    <rect fill='white' x="0" y="0" width="100%" height="100%" />
                    <text x="24" y="37">Слушать</text>
                </mask>
            </defs>
            <rect fill='white' x="2" y="2" rx='5.5' width="100%" height="100%" />
        </svg>
    )

    const renderAuthor = () => (
        <svg className={style.svg} width="166" height="42" viewBox="0 0 166 42" fill="none" xmlns="http://www.w3.org/2000/svg">
            <clipPath id='mask-author'>
                <path d="M10.296 20.43C11.064 20.658 11.652 21.03 12.06 21.546C12.468 22.062 12.672 22.698 12.672 23.454C12.672 24.57 12.246 25.44 11.394 26.064C10.554 26.688 9.348 27 7.776 27H1.566V14.4H7.434C8.898 14.4 10.038 14.682 10.854 15.246C11.67 15.81 12.078 16.614 12.078 17.658C12.078 18.282 11.922 18.834 11.61 19.314C11.298 19.782 10.86 20.154 10.296 20.43ZM4.464 19.62H7.182C7.818 19.62 8.298 19.494 8.622 19.242C8.946 18.978 9.108 18.594 9.108 18.09C9.108 17.598 8.94 17.22 8.604 16.956C8.28 16.692 7.806 16.56 7.182 16.56H4.464V19.62ZM7.668 24.84C9.036 24.84 9.72 24.3 9.72 23.22C9.72 22.176 9.036 21.654 7.668 21.654H4.464V24.84H7.668ZM19.5501 27.144C18.5181 27.144 17.5881 26.934 16.7601 26.514C15.9441 26.082 15.3021 25.488 14.8341 24.732C14.3781 23.976 14.1501 23.118 14.1501 22.158C14.1501 21.198 14.3781 20.34 14.8341 19.584C15.3021 18.828 15.9441 18.24 16.7601 17.82C17.5881 17.388 18.5181 17.172 19.5501 17.172C20.5701 17.172 21.4581 17.388 22.2141 17.82C22.9821 18.24 23.5401 18.846 23.8881 19.638L21.7101 20.808C21.2061 19.92 20.4801 19.476 19.5321 19.476C18.8001 19.476 18.1941 19.716 17.7141 20.196C17.2341 20.676 16.9941 21.33 16.9941 22.158C16.9941 22.986 17.2341 23.64 17.7141 24.12C18.1941 24.6 18.8001 24.84 19.5321 24.84C20.4921 24.84 21.2181 24.396 21.7101 23.508L23.8881 24.696C23.5401 25.464 22.9821 26.064 22.2141 26.496C21.4581 26.928 20.5701 27.144 19.5501 27.144ZM35.0654 22.194C35.0654 22.23 35.0474 22.482 35.0114 22.95H27.6854C27.8174 23.55 28.1294 24.024 28.6214 24.372C29.1134 24.72 29.7254 24.894 30.4574 24.894C30.9614 24.894 31.4054 24.822 31.7894 24.678C32.1854 24.522 32.5514 24.282 32.8874 23.958L34.3814 25.578C33.4694 26.622 32.1374 27.144 30.3854 27.144C29.2934 27.144 28.3274 26.934 27.4874 26.514C26.6474 26.082 25.9994 25.488 25.5434 24.732C25.0874 23.976 24.8594 23.118 24.8594 22.158C24.8594 21.21 25.0814 20.358 25.5254 19.602C25.9814 18.834 26.5994 18.24 27.3794 17.82C28.1714 17.388 29.0534 17.172 30.0254 17.172C30.9734 17.172 31.8314 17.376 32.5994 17.784C33.3674 18.192 33.9674 18.78 34.3994 19.548C34.8434 20.304 35.0654 21.186 35.0654 22.194ZM30.0434 19.296C29.4074 19.296 28.8734 19.476 28.4414 19.836C28.0094 20.196 27.7454 20.688 27.6494 21.312H32.4194C32.3234 20.7 32.0594 20.214 31.6274 19.854C31.1954 19.482 30.6674 19.296 30.0434 19.296ZM46.4375 17.172C47.9375 17.172 49.0895 17.532 49.8935 18.252C50.6975 18.96 51.0995 20.034 51.0995 21.474V27H48.4715V25.794C47.9435 26.694 46.9595 27.144 45.5195 27.144C44.7755 27.144 44.1275 27.018 43.5755 26.766C43.0355 26.514 42.6215 26.166 42.3335 25.722C42.0455 25.278 41.9015 24.774 41.9015 24.21C41.9015 23.31 42.2375 22.602 42.9095 22.086C43.5935 21.57 44.6435 21.312 46.0595 21.312H48.2915C48.2915 20.7 48.1055 20.232 47.7335 19.908C47.3615 19.572 46.8035 19.404 46.0595 19.404C45.5435 19.404 45.0335 19.488 44.5295 19.656C44.0375 19.812 43.6175 20.028 43.2695 20.304L42.2615 18.342C42.7895 17.97 43.4195 17.682 44.1515 17.478C44.8955 17.274 45.6575 17.172 46.4375 17.172ZM46.2215 25.254C46.7015 25.254 47.1275 25.146 47.4995 24.93C47.8715 24.702 48.1355 24.372 48.2915 23.94V22.95H46.3655C45.2135 22.95 44.6375 23.328 44.6375 24.084C44.6375 24.444 44.7755 24.732 45.0515 24.948C45.3395 25.152 45.7295 25.254 46.2215 25.254ZM61.1168 21.942C62.2568 22.326 62.8268 23.094 62.8268 24.246C62.8268 25.122 62.4968 25.8 61.8368 26.28C61.1768 26.76 60.1928 27 58.8848 27H53.7188V17.316H58.6688C59.8808 17.316 60.8288 17.538 61.5128 17.982C62.1968 18.414 62.5388 19.026 62.5388 19.818C62.5388 20.298 62.4128 20.724 62.1608 21.096C61.9208 21.456 61.5728 21.738 61.1168 21.942ZM56.2928 21.294H58.4168C59.4008 21.294 59.8928 20.946 59.8928 20.25C59.8928 19.566 59.4008 19.224 58.4168 19.224H56.2928V21.294ZM58.6508 25.092C59.6828 25.092 60.1988 24.738 60.1988 24.03C60.1988 23.658 60.0788 23.388 59.8388 23.22C59.5988 23.04 59.2208 22.95 58.7048 22.95H56.2928V25.092H58.6508ZM73.232 19.62H69.956V27H67.166V19.62H63.89V17.316H73.232V19.62ZM79.0405 27.144C78.0205 27.144 77.1025 26.934 76.2865 26.514C75.4825 26.082 74.8525 25.488 74.3965 24.732C73.9405 23.976 73.7125 23.118 73.7125 22.158C73.7125 21.198 73.9405 20.34 74.3965 19.584C74.8525 18.828 75.4825 18.24 76.2865 17.82C77.1025 17.388 78.0205 17.172 79.0405 17.172C80.0605 17.172 80.9725 17.388 81.7765 17.82C82.5805 18.24 83.2105 18.828 83.6665 19.584C84.1225 20.34 84.3505 21.198 84.3505 22.158C84.3505 23.118 84.1225 23.976 83.6665 24.732C83.2105 25.488 82.5805 26.082 81.7765 26.514C80.9725 26.934 80.0605 27.144 79.0405 27.144ZM79.0405 24.84C79.7605 24.84 80.3485 24.6 80.8045 24.12C81.2725 23.628 81.5065 22.974 81.5065 22.158C81.5065 21.342 81.2725 20.694 80.8045 20.214C80.3485 19.722 79.7605 19.476 79.0405 19.476C78.3205 19.476 77.7265 19.722 77.2585 20.214C76.7905 20.694 76.5565 21.342 76.5565 22.158C76.5565 22.974 76.7905 23.628 77.2585 24.12C77.7265 24.6 78.3205 24.84 79.0405 24.84ZM92.1679 17.172C93.0679 17.172 93.8839 17.382 94.6159 17.802C95.3599 18.21 95.9419 18.792 96.3619 19.548C96.7819 20.292 96.9919 21.162 96.9919 22.158C96.9919 23.154 96.7819 24.03 96.3619 24.786C95.9419 25.53 95.3599 26.112 94.6159 26.532C93.8839 26.94 93.0679 27.144 92.1679 27.144C90.9319 27.144 89.9599 26.754 89.2519 25.974V30.492H86.4439V17.316H89.1259V18.432C89.8219 17.592 90.8359 17.172 92.1679 17.172ZM91.6819 24.84C92.4019 24.84 92.9899 24.6 93.4459 24.12C93.9139 23.628 94.1479 22.974 94.1479 22.158C94.1479 21.342 93.9139 20.694 93.4459 20.214C92.9899 19.722 92.4019 19.476 91.6819 19.476C90.9619 19.476 90.3679 19.722 89.8999 20.214C89.4439 20.694 89.2159 21.342 89.2159 22.158C89.2159 22.974 89.4439 23.628 89.8999 24.12C90.3679 24.6 90.9619 24.84 91.6819 24.84ZM104.234 20.412C105.494 20.424 106.448 20.706 107.096 21.258C107.744 21.81 108.068 22.602 108.068 23.634C108.068 24.714 107.702 25.548 106.97 26.136C106.238 26.724 105.2 27.018 103.856 27.018L99.1399 27V17.316H101.93V20.412H104.234ZM109.112 17.316H111.902V27H109.112V17.316ZM103.604 25.02C104.144 25.032 104.558 24.918 104.846 24.678C105.134 24.438 105.278 24.078 105.278 23.598C105.278 23.13 105.134 22.788 104.846 22.572C104.57 22.356 104.156 22.242 103.604 22.23L101.93 22.212V25.02H103.604Z" fill="white"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M136.149 22.1493L136.149 20.0517L150.861 20.0517L144.011 13.2012L145.494 11.7179L153.404 19.6285L153.405 19.6284L153.828 20.0517H153.851V20.0746L154.888 21.1116L153.851 22.1487L153.851 22.1493L153.85 22.1493L145.494 30.5054L144.011 29.0222L150.884 22.1493L136.149 22.1493Z" fill="white"/>
            </clipPath>
        </svg>
    )

    const renderCountry = () => (
        <svg className={style.svg} width="166" height="42" viewBox="0 0 166 42" fill="none" xmlns="http://www.w3.org/2000/svg">
            <clipPath id='mask-country'>
                <path d="M10.296 20.43C11.064 20.658 11.652 21.03 12.06 21.546C12.468 22.062 12.672 22.698 12.672 23.454C12.672 24.57 12.246 25.44 11.394 26.064C10.554 26.688 9.348 27 7.776 27H1.566V14.4H7.434C8.898 14.4 10.038 14.682 10.854 15.246C11.67 15.81 12.078 16.614 12.078 17.658C12.078 18.282 11.922 18.834 11.61 19.314C11.298 19.782 10.86 20.154 10.296 20.43ZM4.464 19.62H7.182C7.818 19.62 8.298 19.494 8.622 19.242C8.946 18.978 9.108 18.594 9.108 18.09C9.108 17.598 8.94 17.22 8.604 16.956C8.28 16.692 7.806 16.56 7.182 16.56H4.464V19.62ZM7.668 24.84C9.036 24.84 9.72 24.3 9.72 23.22C9.72 22.176 9.036 21.654 7.668 21.654H4.464V24.84H7.668ZM19.5501 27.144C18.5181 27.144 17.5881 26.934 16.7601 26.514C15.9441 26.082 15.3021 25.488 14.8341 24.732C14.3781 23.976 14.1501 23.118 14.1501 22.158C14.1501 21.198 14.3781 20.34 14.8341 19.584C15.3021 18.828 15.9441 18.24 16.7601 17.82C17.5881 17.388 18.5181 17.172 19.5501 17.172C20.5701 17.172 21.4581 17.388 22.2141 17.82C22.9821 18.24 23.5401 18.846 23.8881 19.638L21.7101 20.808C21.2061 19.92 20.4801 19.476 19.5321 19.476C18.8001 19.476 18.1941 19.716 17.7141 20.196C17.2341 20.676 16.9941 21.33 16.9941 22.158C16.9941 22.986 17.2341 23.64 17.7141 24.12C18.1941 24.6 18.8001 24.84 19.5321 24.84C20.4921 24.84 21.2181 24.396 21.7101 23.508L23.8881 24.696C23.5401 25.464 22.9821 26.064 22.2141 26.496C21.4581 26.928 20.5701 27.144 19.5501 27.144ZM35.0654 22.194C35.0654 22.23 35.0474 22.482 35.0114 22.95H27.6854C27.8174 23.55 28.1294 24.024 28.6214 24.372C29.1134 24.72 29.7254 24.894 30.4574 24.894C30.9614 24.894 31.4054 24.822 31.7894 24.678C32.1854 24.522 32.5514 24.282 32.8874 23.958L34.3814 25.578C33.4694 26.622 32.1374 27.144 30.3854 27.144C29.2934 27.144 28.3274 26.934 27.4874 26.514C26.6474 26.082 25.9994 25.488 25.5434 24.732C25.0874 23.976 24.8594 23.118 24.8594 22.158C24.8594 21.21 25.0814 20.358 25.5254 19.602C25.9814 18.834 26.5994 18.24 27.3794 17.82C28.1714 17.388 29.0534 17.172 30.0254 17.172C30.9734 17.172 31.8314 17.376 32.5994 17.784C33.3674 18.192 33.9674 18.78 34.3994 19.548C34.8434 20.304 35.0654 21.186 35.0654 22.194ZM30.0434 19.296C29.4074 19.296 28.8734 19.476 28.4414 19.836C28.0094 20.196 27.7454 20.688 27.6494 21.312H32.4194C32.3234 20.7 32.0594 20.214 31.6274 19.854C31.1954 19.482 30.6674 19.296 30.0434 19.296ZM47.2835 27.144C46.2515 27.144 45.3215 26.934 44.4935 26.514C43.6775 26.082 43.0355 25.488 42.5675 24.732C42.1115 23.976 41.8835 23.118 41.8835 22.158C41.8835 21.198 42.1115 20.34 42.5675 19.584C43.0355 18.828 43.6775 18.24 44.4935 17.82C45.3215 17.388 46.2515 17.172 47.2835 17.172C48.3035 17.172 49.1915 17.388 49.9475 17.82C50.7155 18.24 51.2735 18.846 51.6215 19.638L49.4435 20.808C48.9395 19.92 48.2135 19.476 47.2655 19.476C46.5335 19.476 45.9275 19.716 45.4475 20.196C44.9675 20.676 44.7275 21.33 44.7275 22.158C44.7275 22.986 44.9675 23.64 45.4475 24.12C45.9275 24.6 46.5335 24.84 47.2655 24.84C48.2255 24.84 48.9515 24.396 49.4435 23.508L51.6215 24.696C51.2735 25.464 50.7155 26.064 49.9475 26.496C49.1915 26.928 48.3035 27.144 47.2835 27.144ZM61.6087 19.62H58.3327V27H55.5427V19.62H52.2667V17.316H61.6087V19.62ZM68.9915 17.172C69.8915 17.172 70.7075 17.382 71.4395 17.802C72.1835 18.21 72.7655 18.792 73.1855 19.548C73.6055 20.292 73.8155 21.162 73.8155 22.158C73.8155 23.154 73.6055 24.03 73.1855 24.786C72.7655 25.53 72.1835 26.112 71.4395 26.532C70.7075 26.94 69.8915 27.144 68.9915 27.144C67.7555 27.144 66.7835 26.754 66.0755 25.974V30.492H63.2675V17.316H65.9495V18.432C66.6455 17.592 67.6595 17.172 68.9915 17.172ZM68.5055 24.84C69.2255 24.84 69.8135 24.6 70.2695 24.12C70.7375 23.628 70.9715 22.974 70.9715 22.158C70.9715 21.342 70.7375 20.694 70.2695 20.214C69.8135 19.722 69.2255 19.476 68.5055 19.476C67.7855 19.476 67.1915 19.722 66.7235 20.214C66.2675 20.694 66.0395 21.342 66.0395 22.158C66.0395 22.974 66.2675 23.628 66.7235 24.12C67.1915 24.6 67.7855 24.84 68.5055 24.84ZM79.5673 17.172C81.0673 17.172 82.2193 17.532 83.0233 18.252C83.8273 18.96 84.2293 20.034 84.2293 21.474V27H81.6013V25.794C81.0733 26.694 80.0893 27.144 78.6493 27.144C77.9053 27.144 77.2573 27.018 76.7053 26.766C76.1653 26.514 75.7513 26.166 75.4633 25.722C75.1753 25.278 75.0313 24.774 75.0313 24.21C75.0313 23.31 75.3673 22.602 76.0393 22.086C76.7233 21.57 77.7733 21.312 79.1893 21.312H81.4213C81.4213 20.7 81.2353 20.232 80.8633 19.908C80.4913 19.572 79.9333 19.404 79.1893 19.404C78.6733 19.404 78.1633 19.488 77.6593 19.656C77.1673 19.812 76.7473 20.028 76.3993 20.304L75.3913 18.342C75.9193 17.97 76.5493 17.682 77.2813 17.478C78.0253 17.274 78.7873 17.172 79.5673 17.172ZM79.3513 25.254C79.8313 25.254 80.2573 25.146 80.6293 24.93C81.0013 24.702 81.2653 24.372 81.4213 23.94V22.95H79.4953C78.3433 22.95 77.7673 23.328 77.7673 24.084C77.7673 24.444 77.9053 24.732 78.1813 24.948C78.4693 25.152 78.8593 25.254 79.3513 25.254ZM86.8486 17.316H89.6386V21.096H93.8506V17.316H96.6586V27H93.8506V23.382H89.6386V27H86.8486V17.316ZM104.621 20.412C105.881 20.424 106.835 20.706 107.483 21.258C108.131 21.81 108.455 22.602 108.455 23.634C108.455 24.714 108.089 25.548 107.357 26.136C106.625 26.724 105.587 27.018 104.243 27.018L99.5266 27V17.316H102.317V20.412H104.621ZM109.499 17.316H112.289V27H109.499V17.316ZM103.991 25.02C104.531 25.032 104.945 24.918 105.233 24.678C105.521 24.438 105.665 24.078 105.665 23.598C105.665 23.13 105.521 22.788 105.233 22.572C104.957 22.356 104.543 22.242 103.991 22.23L102.317 22.212V25.02H103.991Z" fill="white"/>
                <path fillRule="evenodd" clipRule="evenodd" d="M136.149 22.1493L136.149 20.0517L150.861 20.0517L144.011 13.2012L145.494 11.7179L153.404 19.6285L153.405 19.6284L153.828 20.0517H153.851V20.0746L154.888 21.1116L153.851 22.1487L153.851 22.1493L153.85 22.1493L145.494 30.5054L144.011 29.0222L150.884 22.1493L136.149 22.1493Z" fill="white"/>
            </clipPath>
        </svg>
    )

    return (
        <div className={clsx(style.button, style[`button_${type}`])} onClick={onClick}>
            <div className={style.wrapper}>
                <div className={style.video}>
                    <video playsInline autoPlay muted loop>
                        <source src='./button-bg.webm' type='video/webm'/>
                    </video>
                </div>
                {arrow && renderArrow()}
                {play && renderPlay()}
                {author && renderAuthor()}
                {country && renderCountry()}
                {type==='default' ? <div className={style.text}>{children}</div> : ''}
            </div>
        </div>
    );
};
